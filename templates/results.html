{% extends "layout.html" %}

{% block content %}
<div class="jumbotron text-center">
	<h2 class="display-4"><i class="material-icons" style="font-size: 48px">assessment</i>Results </h2>
    <p class="lead">Please export the results to see all the relative database results.</p>
	<a href="{{ url_for('phencards') }}"><button type="button" class="btn btn-success" style="margin-right: 15px"><i class="material-icons" style="font-size: 16px;">redo</i>Re-analyze</button></a>

	<a data-toggle="modal" data-target="#export-data"><button type="button" class="btn btn-info"><i class="material-icons" style="font-size: 16px">cloud_download</i>Export</button></a>
</div>

<div class="modal" tabindex="-1" role="dialog" id="export-data">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Export Results</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<a href="{{url_for('download_json') }}"><button class='btn btn-primary'>JSON</button></a>
			</div>
		</div>
	</div>
</div>

<head>
<style>
h1 {
  display: inline;
  margin-bottom: 1em;
  text-align: left;
  color: #efa50e;
  font-size: 35px;
}
table, th, td {
  border: 2px #4b873f;
  border-collapse: collapse;
}
th {
  padding: 2px;
  text-align: center;
}
</style>
</head>

<nav class="navbar navbar-expand-sm navbar-inverse bg-light">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse flex-column" id="navbarCollapse">
        <ul class="navbar-nav ml-auto small">
          <li class="nav-item active"><a class="page-scroll scroll" href="#Aliases">Aliases</a></li>
          <li class="nav-item"><a class="page-scroll scroll" href="#Related Terms">Related Terms</a></li>
          <li class="nav-item"><a class="page-scroll scroll" href="#Diseases">Diseases</a></li>
          <li class="nav-item"><a class="page-scroll scroll" href="#Genes">Genes</a></li>
          <li class="nav-item"><a class="page-scroll scroll" href="#Pathway">Pathway</a></li>
        </ul>
        <ul class="navbar-nav flex-row ml-auto small">
          <li class="nav-item"><a class="page-scroll scroll" href="#Drugs">Drugs</a></li>
          <li class="nav-item"><a class="page-scroll scroll" href="#Literature">Literature</a></li>
          <li class="nav-item"><a class="page-scroll scroll" href="#Companies & Foundations">Companies & Foundations</a></li>
          <li class="nav-item"><a class="page-scroll scroll" href="#Clinical Trials">Clinical Trials</a></li>
          <li class="nav-item"><a class="page-scroll scroll" href="#Images">Images</a></li>
        </ul>
</div>
</nav>



<br>
<div class="container" id="bar">
<hr>
</div>
<div class="container" id="Aliases">
    <h1><span style="color: #efa50e; "><b>Aliases</b></span></h1>
    <br><br>
    <tr><th><span style="color: black; ">Here are the aliases referenced from <a target="_blank" href="https://www.nlm.nih.gov/research/umls/index.html">UMLS database</a>, you can click on the result to explore more about the phenotype names:</span></th></tr>
    {{ html_umls|safe }}
    <hr class="innerbar">
    <tr><th><span style="color: black; ">Here are the aliases referenced from <a target="_blank" href="http://www.snomed.org/">SNOMED database</a>, you can click on the result to explore more about the phenotype names:</span></th></tr>
    {{ html_snomed|safe }}
    <hr class="innerbar">
    <tr><th><span style="color: black; ">Here are the aliases referenced from <a target="_blank" href="https://www.icd10data.com/">ICD-10 database</a>, you can click on the result to explore more about the phenotype names:</span></th></tr>
    <hr class="innerbar">
    <tr><th><span style="color: black; ">Here are the aliases referenced from <a target="_blank" href="https://hpo.jax.org/app/">HPO database</a>, you can click on the result to explore more about the phenotype names:</span></th></tr>
    {{ html_table1|safe }}

</div>

<div class="container" id="bar" >
<hr>
</div>

<div class="container" id="Related Terms">
    <h1><span style="color: #efa50e; "><b>Related Terms</b></span></h1>
    <br><br>
</div>

<div class="container" id="bar">
<hr>
</div>

<div class="container" id="Diseases">
    <h1><span style="color: #efa50e; "><b>Diseases</b></span></h1>
    <br><br>
    <tr><th><span style="color: black; ">Here are the diseases referenced from <a target="_blank" href="https://www.ncbi.nlm.nih.gov/omim/">OMIM database</a>, you can click on the result to explore more about the phenotype names:</span></th></tr>
    {{ html_table2OMIM|safe }}
    {{ html_table2D|safe }}
    <br><br>
    <tr><th><span style="color: black; ">Here are the diseases referenced from <a target="_blank" href="https://www.orpha.net/consor/cgi-bin/index.php">ORPHA database</a>, you can click on the result to explore more about the phenotype names:</span></th></tr>
    {{ html_table2OR|safe }}
</div>
<br>

<div class="container" id="bar">
<hr>
</div>

<div class="container" id="Genes">
    <h1><span style="color: #efa50e; "><b>Genes</b></span></h1>
    <br><br>
    <tr><th><span style="color: black; ">Here are the related genes referenced from <a target="_blank" href="https://phen2gene.wglab.org">Phen2Gene web application</a>:</span></th></tr>
</div>
<br>
{# gene list return 04/26/2020 #}
<div class="container" >

	{{ html_gene_api|safe }}

</div>

<div class="container" id="bar">
<hr>
</div>
<div class="container" id="Pathway">
    <h1><span style="color: #efa50e; "><b>Pathway</b></span></h1>
    <br><br>
    <a target="_blank" id="nav-pathway" href="{{ url_for('generate_pathway_page') }}" style="font-size: 25px">
        KEGG
    </a>

</div>

<div class="container" id="bar">
<hr>
</div>

<div class="container" id="Drugs">
    <h1><span style="color: #efa50e; "><b>Drugs</b></span></h1>
    <br><br>
    <table>
    <tr>
    <td class="verticaltable"><a target="_blank" id="nav-tocris" href="{{ url_for('generate_tocris_page') }}" style="font-size: 25px">
        Tocris
    </a></td>
    <td class="verticaltable"><a target="_blank" id="nav-apexbio" href="{{ url_for('generate_apexbio_page') }}" style="font-size: 25px">
        APExBio
    </a></td>
    <td class="verticaltable"><a target="_blank" id="nav-wikidata" href="{{ url_for('generate_wikidata_page') }}" style="font-size: 25px">
        Wikidata
    </a></td>
    </tr>
    </table>
</div>

<div class="container" id="bar">
<hr>
</div>

<div class="container" id="Literature">
    <h1><span style="color: #efa50e; "><b>Literature</b></span></h1>
    <br><br>
    <a target="_blank" id="nav-literature" href="{{ url_for('generate_literature_page') }}" style="font-size: 25px">
        Pubmed
    </a>

</div>

<div class="container" id="bar">
<hr>
</div>

<div class="container" id="Companies & Foundations">
    <h1><span style="color: #efa50e; "><b>Companies & Foundations</b></span></h1>
    <br><br>
</div>

<div class="container" id="bar">
<hr>
</div>

<div class="container" id="Clinical Trials">
    <h1><span style="color: #efa50e; "><b>Clinical Trials</b></span></h1>
    <br><br>
    <a target="_blank" id="nav-clinical" href={{ url_for('generate_clinical_page') }} style="font-size: 25px">
        ClinicalTrials.gov
    </a>

</div>

<div class="container" id="bar">
<hr>
</div>

<div class="container" id="Images">
    <h1><span style="color: #efa50e; "><b>Images</b></span></h1>
    <br><br>
</div>
<br>


<div class="container" >

	<!-- error/warning messages -->
	<div>
		<ul id="error-messages" role="alert">
			{% for e in errors %}
			<li>{{ e }}</li>
			{% endfor %}
		</ul>
	</div>

	<!-- make error/warning messages yellow if any exist -->
	<script type="text/javascript">
		$("#error-messages").each(function() {
			if($(this).children().length > 0) {
				$(this).addClass("alert alert-warning");
			}
		});
	</script>

</div>


{% endblock %}

{% block scripts %}
<!-- make nice table with multiple pages -->
<script type="text/javascript">
	$(document).ready(function () {
	  	$('#results-table1, #results-table2OMIM, #results-table2D, #results-table2OR, #results-table3, #results-gene-api, #results-umls, #results-snomed, #results-drugs').DataTable({
	  		"order": [[ 1, "asc" ]],
	  		"pageLength": 5,
	  		"lengthMenu": [[5, 20, 50, -1], [5, 20, 50, "All"]]
	  	});
	  	$('#clinical-table').DataTable({
	  		"order": [[ 0, "asc" ]],
	  		"pageLength": 5,
	  		"lengthMenu": [[5, 20, 50, -1], [5, 20, 50, "All"]]
	  	});
	});
</script>
{% endblock %}
