{% extends "layout.html" %}

{% block content %}
<div class="jumbotron text-center">
	<h1 class="display-4"><i class="material-icons" style="font-size: 48px">assessment</i>Results </h1>
    <h4 class="display-6">By default, only the top 1000 genes are displayed.</h4>
    <p class="lead">Please export the results to see all the gene rankings.</p>
	<a href="{{ url_for('phen2Gene') }}"><button type="button" class="btn btn-success" style="margin-right: 15px"><i class="material-icons" style="font-size: 16px;">redo</i>Re-analyze</button></a>

	<a data-toggle="modal" data-target="#export-data"><button type="button" class="btn btn-info"><i class="material-icons" style="font-size: 16px">cloud_download</i>Export</button></a>
</div>

<div class="modal" tabindex="-1" role="dialog" id="export-data">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Export Results</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<a href="{{url_for('download_json') }}"><button class='btn btn-primary'>JSON</button></a>
			</div>
		</div>
	</div>
</div>

<div class="container" >

	<!-- error/warning messages -->
	<div>
		<ul id="error-messages" role="alert">
			{% for e in errors %}
			<li>{{ e }}</li>
			{% endfor %}
		</ul>
	</div>

	<!-- make error/warning messages yellow if any exist -->
	<script type="text/javascript">
		$("#error-messages").each(function() {
			if($(this).children().length > 0) {
				$(this).addClass("alert alert-warning");
			}
		});
	</script>

	{{ html_table|safe }}

</div>  
{% endblock %}

{% block scripts %}
<!-- make nice table with multiple pages -->
<script type="text/javascript">
	$(document).ready(function () {
	  	$('#results-table').DataTable({
	  		"order": [[ 1, "asc" ]],
	  		"pageLength": 100,
	  		"lengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]]
	  	});
	});
</script>
{% endblock %}